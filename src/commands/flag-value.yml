# set-new-version-tag:
description: "Get flag value from a string, works withy python and regex"
parameters:
  text:
    description: "String, containing flag and value"
    type: string
  flag:
    description: "Flag name which value need to be retrieved"
    type: string
  answer:
    description: "Variable name for response value"
    type: string
    default: "FLAG_VALUE"
steps:
  - run: shellcheck -e SC2154 scripts/flag_value.sh
  - run:
      name: "Add text to env"
      command: echo "export text='<< parameters.text >>'" >> "$BASH_ENV"
  - run:
      name: "Add flag name to env"
      command: echo "export flag='<< parameters.flag >>'" >> "$BASH_ENV"
  - run:
      name: "Add answers variable name to env"
      command: echo "export answer='<< parameters.answer >>'" >> "$BASH_ENV"
  - run:
      name: "Get given flag value from a string"
      command: "<< include(scripts/flag_value.sh) >>"
  - run:
      name: "echo flag value"
      command: "echo $FLAG_VALUE"
