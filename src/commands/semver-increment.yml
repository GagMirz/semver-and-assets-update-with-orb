# set-new-version-tag:
description: "Get Semver tag via github API, update via version_increment.sh and export VERSION variable"

parameters:
  configs_path:
    description: "Path to configuration file to source, required configs option, version"
    type: string
    default: "/.utils.config"

steps:
  - run:
      name: "Add level to env"
      command: source << parameters.configs_path >>
  - run:
      name: "Add default values if missing to level"
      command: |
        [[ -z $version ]] && version="v0.0.0"
  - run:
      name: "Add default values if missing to level"
      command: |
        [[ -z $level ]] && level="p"
  - run:
      name: "Add default values if missing to level"
      command: |
        [[ -z $answer ]] && answer="VERSION"
  - run:
      name: "Calculate, increment and update new version into global variable"
      command: "<< include(scripts/semver_increment.sh) >>"
